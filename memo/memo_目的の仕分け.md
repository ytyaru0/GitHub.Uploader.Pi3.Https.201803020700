# やってみたいこと

* IssueをCUI登録したい
* Issueを自動登録したい
* コントリビュート（草）を1年分以上作成したい

これらの意義について考えてみる。

## IssueをCUI登録したい

### IssueをGitHubサイトから登録する

以下のような手間がある。

* 複数アカウントを所有しているのでログインするときに面倒である
    * 複数アカウント同時ログインできるアドオンを入れる必要がある
        * ブラウザごとにツールが異なる
        * インストール方法が異なる
        * 使い方も異なる
    * ログインアカウントをGUIから選択せねばならない
        * マウス操作が面倒くさい
    * ブラウザが重い
        * 低スペックPCだとフリーズもしかねない
* Issue登録までのページ遷移が面倒
    * リポジトリ検索
        * Issueタブ選択
            * Newボタン押下
                * タイトルと本文を入力
                    * 登録ボタン押下
                        * スクロールして番号を見る
                            * `git commit -m "fix #Issue番号"`のようにしてIssueを閉じる

## CUIで登録する

* ブラウザ起動不要
    * ブラウザやサイトでの操作が一切不要

代わりに以下のような操作になる。

```sh
python GitHubIssue.py "タイトル" -l bug -b "# 本文" -b "" -b "* リスト項目"
```
```sh
python GitHubIssue.py "タイトル" -l bug -f "/tmp/本文.md"
```

### 問題

* 本文の記述が面倒すぎて現実的でない
    * 1行毎にコマンド生成する手間が増える
    * ファイル作成の手間が増える

本文を省略した形式で使うなら現実的である。

```sh
python GitHubIssue.py "タイトル" -l bug
```

しかし、これでは問題や課題について詳細に述べることができない。役立つ場面が限られてしまうのではないか。

かといって、Markdownで書き、HTMLで表示確認できるようにすると以下の疑問がある。

* 目視が必要な時点で自動化はできない
* GitHubサイトで書いたほうが早いのではないか。わざわざ実装する必要があるのか
    * HTML表示確認でブラウザを使うことになるため省メモリ化はできない
    * GitHubサイトでのページ操作省略のためだけに実装するにしては規模が大きい。費用対効果が薄いのでは？

## Issueを自動登録したい

表示確認を省略してしまえば自動化できる。自動化できれば先述の効果がある。ただし、Issueは開発の進め方そのものなので定型化しづらく自動化が難しい。

### 1commit1issue

最も簡単なのは、1commit1issueの対応付けによる自動生成と自動Issue閉じである。コミットメッセージとIssueに同じテキストを用いて登録する。もしくは何らかの変換機構を用意して、IssueだけはMarkdown形式にする。

```sh
$ python3 GitHubUploader `pwd` -u user -m "概要" -m "詳細1" -m "詳細2"
```

問題はcommitとissueの単位を同じにしてしまうことに意味があるか否かである。issueを作ると同時に閉じてしまうのは本来の使い方と異なる。「この問題に気づいているけど、今すぐコードを書いて修正できるわけではない。とりあえず忘れないようにメモする」というのがIssueの趣旨だと思う。commitしてしまったらその時点で解決なのでIssueにする必要がない。

もしくはcommitの前にIssueを立てるパターンもある。たとえば新規機能の追加を課題として立てておく。実装したcommitに`fix #そのIssue番号`としてIssueを閉じる。commitと紐付けることができる。

いずれにしても、commitと同時にIssueを作成して閉じるという使い方は奇妙かもしれない。せいぜいcommitが可視化しやすくなるというくらいの意味しかない。サイトから閲覧できることや、Issue取得APIで一覧を取得できるようになることなどが利点か。また、1commitで完了する程度の規模なら、commitとissueを別々に作るのが面倒なのも確かである。commitにさほど時間もかからず、コードを書いたほうが早いと思えるならIssueを立てるもは面倒である。また、コードを読んだり書かねばよくわからないなら、Issueを立てるのは早計かもしれない。Issueは完全削除ができないので作るのをためらう。ならばいっそ不確定要素は最初からとりのぞき、事後報告として利用することも候補にあがるのではないか。

### 個別登録

コミットメッセージとは個別にIssueを登録する。ふつうの使い方である。

自動的に登録するなら、以下のようなコマンドで登録可能にすべきである。

```sh
python GitHubIssue.py "タイトル" -l bug -b "# 本文" -b "" -b "* リスト項目"
```
```sh
python GitHubIssue.py "タイトル" -l bug -f "/tmp/本文.md"
```
```sh
python GitHubIssue.py "タイトル" -l bug
```
```sh
python GitHubIssue.py "タイトル"
```

ただし、返されたIssue番号がわからないとコミットメッセージで閉じられなくなってしまう。それを保持したり、参照したりする方法を用意するのが面倒になりそう。Issue番号とcommitの対応付けは人間がやらねばならない以上、完全自動化は不可能。半自動化しかできない。実装する価値があるか。

## コントリビュート（草）を1年分以上作成したい

commitした時間と、対象リポジトリを記録する。これを元に、ユーザにおけるコミット頻度をコントリビュート（草）で表示したい。

* 己のアウトプットが促進される
    * 「頻繁に活動している感」が得られる
        * 生存確認になる
            * 心臓が動いているか
            * コードを書く人として生存しているか
    * 「自分はこれだけ頑張った」を可視化する
        * 自己満足に浸れる
            * 「よし、これからも頑張るぞ」と思える
        * 第三者へもアピールできる
            * 他人の目を気にして適度なプレッシャーを創出する

ついでに不満な点は以下。

* 活動の品質が不透明かつ不平等。等しく`1`になってしまう

パッと見でわかりやすくするには情報をごっそり削ぎ落として単純化する必要がある。仕方ないのはわかっているが質も可視化したい。たとえばReadMeの誤りを修正するのと、新プロジェクト追加するのが同じ1件分というのが嫌。

### Issueは必要か？

コントリビュートはリポジトリ操作全般をカウントするのだと思う。Issue登録も含まれている。しかしGitHubの本分はあくまでソースコードである。コントリビュートは「commit頻度の可視化」が注目すべき点のはず。

### 何が必要か

commit, issue。Issue番号、コミットのハッシュID、作成日時、対象リポジトリ、対象ユーザアカウント。

現状、GitHub登録ツールではリポジトリしか記録していない。commit単位では記録していない。コントリビュート（草）は作れない。

* https://developer.github.com/v3/repos/commits/

全ユーザ、全リポジトリ、全コミットの情報が必要になる。収集だけで大変そう。

# どうするか？

* CUI入力省略
* Issue登録
* コントリビュート表示
* client.py改修

## CUI入力省略

* リポジトリ作成
* コミット

これらはミスを防ぐために用意した。はたして省略すべきか疑問が残る。`-m`起動引数があるときは省略するようにしてもいいが、メッセージを事前に指定しておいて表示確認だけしたい場合もあるかもしれない。

そうなると、自動化コマンドと、CUI入力コマンドの2種類を用意したほうがいい気もする。決めがたいため後回し。

## Issue登録

issue登録を実装するか否かには疑問が残る。

* ドキュメントにしたい(Markdown)ならHTML表示が必要
    * ブラウザを使わずに登録することはできない
        * 省メモリ化できない
    * ログインやページ遷移などの手続きは省略できる
        * 費用対効果はあるか？実装コストが高い割に削減時間は微々たるものでは？
* 自動化するならHTML表示確認できない
    * Markdownなど本文を要する規模のIssueは自動化しづらい

結果的に、GitHubサイトで編集するのが最適ということになるのではないか？決めがたいため後回し。

## コントリビュート表示

ぜひ実装したい。構造を考えるのが難しそう。

issueを実装したら、それをコントリビュートにも加えたい。そのようなことができる構造として作成したい。

commitはすでに実装している。それをどのようにコントリビュートデータとして蓄積するか検討したい。

基礎としてcommitのログ情報を取得することが必要になる。

http://qiita.com/mima_ita/items/c41bc650b248a9a39cf7

## client.py改修

新規機能追加の前にやりたい。とくにIssueのようにWebAPI機能を追加する前に。

# 結論

client.py改修を優先する。

